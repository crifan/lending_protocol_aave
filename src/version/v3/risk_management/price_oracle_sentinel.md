# Price Oracle Sentinel

* AAVE协议V3：Price Oracle Sentinel = 价格预言机哨兵 
  * 概述 
    * Sentinel 功能被设计用于 L2，以处理顺序器的最终停机（但未来可以扩展到处理 L1 的其他情况）。它引入了一个宽限期，以在特定情况下禁用借款和处理清算 
      * 哨兵功能为清算引入了宽限期，并在特定情况下禁止借款。 
      * 这个特性是专门为L2s设计的，用于处理序列器的最终停机(但将来可以扩展到处理其他情况，甚至在L1s上)。 
  * 详解 
    * Aave V3引入了一个价格预言机哨兵来缓解在第二层网络中可能出现的一些用户体验问题。 
    * 简要介绍L2 
      * 今天大多数第二层网络（乐观optimistic和有效性汇总validity rollups）使用一个中心化的区块生成器（排序器）以及分布式验证（欺诈或有效性证明）来增加吞吐量。 
      * 总的来说，这些架构支持两个待处理交易队列： 
        * 一个是链上的（需要L1交易） 
        * 另一个是由排序器操作的链下队列 
      * 虽然排序器可以使用来自两个队列的交易构建下一个L2-"区块"（这里未涵盖L1的一些排序限制），但L1待处理交易的包含通常可以被推迟到某个截止日期，之后用户可以强制采取行动，无论是包含还是zk-sync的退出模式。当排序器遇到停机时，这会导致“网络”不再推进状态——不会产生新的区块。尽管仍然可以向待处理交易队列（链上或链下）发送交易，但短期内不会发生任何事情，链下交易甚至可能因排序器架构和停机性质而被拒绝或丢弃。 
      * 请注意，即使交易被添加到L1的交易队列中，在交易被包含在对规范交易历史的承诺中之前（无论是由排序器还是强制包含），L2的规范状态仍然未知。 
      * 对于Aave协议和其他使用预言机价格提供的系统，这意味着在排序器停机时，提供的价格不会更新（毕竟它们使用交易）。本质上，在停机期间发生的整个价格变动将在排序器重新启动时应用。这种不确定性以及“慢速闪崩”的可能性，加上大多数普通用户无法直接在L1排队L2交易的事实，促使Aave V3在这些确切情况下引入了清算宽限期。只要头寸不是严重抵押不足（0.95 < HF < 1），它将有一个从排序器启动时开始到可以被清算的宽限期。如果头寸低于0.95，它可以像在L1上那样被完全清算。请注意，这个宽限期只有在排序器停机时才会被激活。在宽限期间，用户也将不被允许借款。 
